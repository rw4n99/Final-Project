<div class="govuk-width-container">
  <main class="govuk-main-wrapper">
    <div class="govuk-grid-row">
<%= form_with(model: @visa_document, url: visa_document_path(@visa_document), local: true, multipart: true) do |form| %>
  <h1 class="govuk-heading-l">Edit Visa Document</h1>

  <table class="govuk-table">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th class="govuk-table__header">Document Type</th>
        <th class="govuk-table__header">Current File</th>
        <th class="govuk-table__header">Upload New File</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">

      <% {
        "Visa Application Form" => :visa_application_form,
        "Photograph ID" => :photograph_id,
        "Passport" => :passport,
        "Nombramiento" => :nombramiento,
        "Health Insurance" => :health_insurance,
        "Criminal Record" => :criminal_record,
        "Medical Certificate" => :medical_certificate,
        "Visa Application Payment" => :visa_application_payment
      }.each do |label, field| %>
        <tr class="govuk-table__row">
          <td class="govuk-table__cell"><%= label %></td>
          <td class="govuk-table__cell">
            <% if @visa_document.send(field).attached? %>
              <%= @visa_document.send(field).filename.to_s %><br>
              <%= link_to "Download", rails_blob_path(@visa_document.send(field), disposition: "attachment"), class: "govuk-link" %>
            <% else %>
              <span class="govuk-body">No document uploaded</span>
            <% end %>
          </td>
          <td class="govuk-table__cell">
            <%= form.label field, "Upload New", class: "govuk-label" %><br>
            <%= form.file_field field, class: "govuk-file-upload" %>
          </td>
        </tr>
      <% end %>

    </tbody>
  </table>

  <div class="govuk-form-group">
    <%= form.submit "Update Document", class: "govuk-button" %>
  </div>
<% end %>